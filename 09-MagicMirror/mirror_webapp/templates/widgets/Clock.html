{% extends "widget.html" %}

{% block width %}150{% endblock %}

{% block widget_scripts %}
  var {{ widget.id }}_time;

  function {{ widget.id }}_Init() {
    $.getJSON("/widget_data/{{ widget.id }}", function(data) {
      {{ widget.id }}_time = new Date(data.year, data.month, data.day, data.hour, data.minute, data.second, 0);
    });
  }

  function {{ widget.id }}_Update() {
    var sec = {{ widget.id }}_time.getSeconds() + 1;
    {{ widget.id }}_time.setSeconds(sec);

    var h = {{ widget.id }}_time.getHours();
    var m = {{ widget.id }}_time.getMinutes();
    var s = {{ widget.id }}_time.getSeconds();

    m = checkTime(m);
    s = checkTime(s);

    document.getElementById('{{ widget.id }}_time').innerText = h + ":" + m + ":" + s;
  }

  function checkTime(i) {
    if (i<10) {i = "0" + i};
    return i;
  }
{% endblock %}

{% block widget_contents %}
  <p id="{{ widget.id }}_time"></p>
{% endblock %}
